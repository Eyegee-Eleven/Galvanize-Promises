const chai = require('chai')
const expect = chai.expect
const chaiAsPromised = require('chai-as-promised')
const FortuneTeller = require('../../src/fortune-teller')

chai.use(chaiAsPromised)

describe('FortuneTeller', function () {
  describe('.ask', function () {
    it('should return a fortune when asked a question', function () {
      const result = FortuneTeller.ask('Question', 10)

      return expect(result).to.eventually.be.fulfilled
      return expect(result).to.eventually.have.property('question')
      return expect(result).to.eventually.have.property('response')
    })

    it('should throw an error if no question is asked', function () {
      const result = FortuneTeller.ask(null, 10)

      return expect(result).to.eventually.be.rejected
      return expect(result).to.eventually.have.property('error')
    })
  })
})
